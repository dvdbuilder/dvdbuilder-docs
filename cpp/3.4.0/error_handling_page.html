<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>DVDBuilder for C++: DVD Error Handling</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="DVDBuilder for C++"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra-doxygen.css" rel="stylesheet" type="text/css"/>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-226295-2', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DVDBuilder for C++
   &#160;<span id="projectnumber">3.4</span>
   </div>
   <div id="projectbrief">DVD Authoring Software Development Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('error_handling_page.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">DVD Error Handling </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sectionErrorState"></a>
Error State</h1>
<p>Most operations in DVDBuilder produce a result that tells whether the operation has succeeded or not and also gives the reason for the failure. The operation result, also called the <b>error state</b> is accessible through the property: <b>Error</b> of type <b>ErrorInfo</b>. </p>
<p>A number of interfaces use that property to expose the error state of an object.</p>
<p>In general the error state represents the result of the last operation performed by the object. The error state is updated after every operation. </p>
<p><b>ErrorInfo.Facility</b> <b>Property</b><br />
 Gets the source of the last error. This value is indicative about the success of the last operation. If it is ErrorFacility.Success then the last operation has fully succeeded and the values returned by Code should be ignored. Any other value than ErrorFacility.Success means that the last operation has failed in some way.</p>
<p><b>See </b> <a class="el" href="namespaceprimo_1_1dvdbuilder_1_1_error_facility.html">ErrorFacility</a></p>
<p><b>ErrorInfo.Code</b> <b>Property</b><br />
 Returns the error code of the last operation. By itself the error code does not imply the success or the failure of the operation and should be ignored when ErrorFacility is ErrorFacility.Success. The error code should be interpreted only when the failed component (error facility) is recognized. DVDBuilder provides the error codes for the built-in error facilities: ErrorFacility.VideoRecorder, ErrorFacility.VRDevice and ErrorFacility.VRDeivicePlugin. However some errors may be generated by external components like the PrimoBurner Engine or by the operating system. In these cases additional information is required in order to interpret the error code.</p>
<dl>
<dt></dt>
<dd><table class="doxtable">
<tr>
<td><b>Interpret the Code as</b> </td><td><b>When ErrorFacility is</b>  </td></tr>
<tr>
<td><a class="el" href="namespaceprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder_error.html#a8150b7776c2a1749101acf22e868d091">VideoRecorderError</a> </td><td>ErrorFacility.VideoRecorder  </td></tr>
<tr>
<td><a class="el" href="namespaceprimo_1_1dvdbuilder_1_1_v_r_1_1_v_r_device_error.html#a8150b7776c2a1749101acf22e868d091">VRDeviceError</a> </td><td>ErrorFacility.VRDevice  </td></tr>
<tr>
<td><a class="el" href="namespaceprimo_1_1dvdbuilder_1_1_v_r_1_1_v_r_device_plugin_error.html#a8150b7776c2a1749101acf22e868d091">VRDevicePluginError</a> </td><td>ErrorFacility.VRDevicePlugin  </td></tr>
<tr>
<td>Operating System error. Refer to the OS documentation. </td><td>ErrorFacility.SystemWindows<br />
 ErrorFacility.SystemPosix<br />
 ErrorFacility.SystemMacMach<br />
 ErrorFacility.SystemMacOSStatus   </td></tr>
<tr>
<td>PrimoBurner engine error. Refer to PrimoBurner documentation. </td><td>ErrorFacility.PBEngine  </td></tr>
<tr>
<td>External component error. </td><td>A recognized external component with available documentation.  </td></tr>
</table>
</dd>
</dl>
<p><br />
 </p>
<h1><a class="anchor" id="sectionDealingWithErrorsInParallel"></a>
Dealing with errors in parallel video recorder operations.</h1>
<p>A number of video recorder operations are performed concurrently (in parallel) to all attached devices. These operations are:<br />
</p>
<p><a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a4468f752e446944cadf34cbab569512e">prepareMedia</a>, <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#ab6c399bcc23d92e1f67915b8502afbf5">start</a>, <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a1063615ecec8a78d629bfbfdef917bab">startAsync</a>, <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a868b0cc0722cb656e321610b66139858">write</a>, <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a0d4281e1d4b18d85da6abb5b479e00cc">stop</a> and <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#aec869a814bf2f22595541c67875b2186">finalizeMedia</a>. All of these methods (with the exception of startAsync) block while the operation is executed. They return <em>true</em> when the operation has succeeded for all attached devices and <em>false</em> when any of the attached devices has failed. When a parallel operation fails with a <em>DeviceError</em> (<a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a47d36d1c07e15cd2d5bb67a108f7475c">VideoRecorder.error.facility</a> == ErrorFacility.VideoRecorder and <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a47d36d1c07e15cd2d5bb67a108f7475c">VideoRecorder.error.code</a> == VideoRecorderError.DeviceError) the error state of each device may be obtained by using <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a5825e43c3584c5ba3aae502920504495">VideoRecorder.deviceError</a>. The device error state can be analyzed by using the properties Facilty and Code as described already in this topic. When the video recorder writes to the attached devices (<a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a868b0cc0722cb656e321610b66139858">VideoRecorder::write</a>) it ignores the already failed devices, therefore their error state remains unchanged in the subsequent Write calls.</p>
<p><br />
 </p>
<h1><a class="anchor" id="sectionSampleRecording"></a>
A sample case of recording to several devices.</h1>
<p>Consider that a video should be recorded concurrently to 7 devices, named <em>d0</em><b>, </b><em>d1,</em><b> </b>... and <em>d6</em> for the purpose of this sample. All possible steps involved in the recording will be discussed.</p>
<p><b>1. <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a4468f752e446944cadf34cbab569512e">prepareMedia</a></b> - this step is optional but if used it can generate a <em>DeviceError</em>(described above).</p>
<p>Device <em>d0</em> fails during this operation and the other devices succeed.</p>
<p>prepareMedia returns <em>false</em> and the <em>DeviceError</em> is set in the video recorder. The application enumerates the device error state and finds the failed device.</p>
<p>1.1. The application aborts the recording process and informs the user about the failed device. No calls to the DVDBuilder API are necessary in this case.</p>
<p><em>or</em></p>
<p>1.2. The application decides to start the recording process and only informs the user about the failed device. It is advisable to remove the failed device from the device list especially before calling the synchronous Start method. This guarantees that the video recording will start as soon as possible.</p>
<p>Either start() or startAsync() but the start step is mandatory.</p>
<p><b>2.1. <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#ab6c399bcc23d92e1f67915b8502afbf5">start</a></b></p>
<p>Device <em>d1</em> fails during this operation. So does device <em>d0</em> if it is still in the device list.</p>
<p>2.1.1. Upon seeing the failed devices the application stops the recording by calling the <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a0d4281e1d4b18d85da6abb5b479e00cc">stop</a> method.</p>
<p><em>or</em></p>
<p>2.1.2. The application reports the failed devices and starts calling the <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a868b0cc0722cb656e321610b66139858">write</a> method repeatedly.</p>
<p><b>2.2. <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a1063615ecec8a78d629bfbfdef917bab">startAsync</a></b></p>
<p>Device <em>d1</em> fails during the asynchronous start but the application finds this only in one of the subsequent <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a868b0cc0722cb656e321610b66139858">write</a> method calls. This is true for device <em>d0</em> if it is still in the device list.</p>
<p>2.2.1. StartAsync returns <em>false</em> and the application aborts the recording process because there's a logical and unrecoverable error. No further calls to the DVDBuilder API are necessary in this case.</p>
<p><em>or</em></p>
<p>2.2.2. StartAsync returns <em>true</em> and the application starts calling the <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a868b0cc0722cb656e321610b66139858">write</a> method repeatedly.</p>
<p><b>3. <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a868b0cc0722cb656e321610b66139858">write</a></b> - this step is mandatory and may be called many times to record the incoming video.</p>
<p>Initially the video recorder uses only devices from <em>d2</em> to <em>d6</em>.</p>
<p><em>(writing...)</em></p>
<p>Device <em>d2</em> fails at some point because the DVD disc is defective.</p>
<p>3.1. The application stops the recording process by calling the <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a0d4281e1d4b18d85da6abb5b479e00cc">stop</a> method.</p>
<p>or</p>
<p>3.2. The application reports the failed devices so far (<em>d0, d1 </em>and<b> </b><em>d2</em>) and continues writing.</p>
<p><em>(writing...)</em></p>
<p>Device <em>d3</em> fails at some point because the DVD disc has run out of space.</p>
<p>The application either stops the recording or continues to record to devices <em>d4, d5</em> and <em>d6</em>.</p>
<p><em>(writing...)</em></p>
<p>Device <em>d4</em> fails at some point because the DVD disc has run out of space.</p>
<p>The application decides to stop the recording instead of trying to record only to <em>d5</em><b> </b>and<b> </b><em>d6</em>.</p>
<p><b>4. <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a0d4281e1d4b18d85da6abb5b479e00cc">stop</a></b> - this step is mandatory whenever the <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#ab6c399bcc23d92e1f67915b8502afbf5">start</a> method is called or the <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#a1063615ecec8a78d629bfbfdef917bab">startAsync</a> method succeeds.</p>
<p>During this step the video recorder tries to stop devices <em>d3</em>, <em>d4</em>, <em>d5</em> and <em>d6</em>. The first three devices (<em>d0</em>, <em>d1</em> and <em>d2</em>) are considered unreliable because they have truly failed, not only run out of space as <em>d3</em> and <em>d4,</em> therefore their error state remains unchanged after this step.</p>
<p>Device <em>d4</em> fails during this step. Stop returns <em>false </em>and the <em>DeviceError</em> is set in the video recorder. The application enumerates the device error state and finds out that the only successfully recorded devices at this point are <em>d3, d5</em> and <em>d6</em>.</p>
<p><b>5. <a class="el" href="classprimo_1_1dvdbuilder_1_1_v_r_1_1_video_recorder.html#aec869a814bf2f22595541c67875b2186">finalizeMedia</a></b> - this step should be called if no additional recording will be appended.</p>
<p>During this step device <em>d5</em> fails. finalizeMedia returns <em>false</em> and the <em>DeviceError</em> is set in the video recorder.</p>
<p>The application enumerates the device error state and finds out that devices <em>d3</em> and <em>d6</em> have no errors and therefore are successfully finalized.</p>
<p><br />
 <br />
 After the whole process is completed only the video content in devices <em>d3</em> and <em>d6</em> is guaranteed to be played back in a standalone DVD player. However the video in <em>d3</em> will be shorter as it has run out of space during the recording. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
    <a href="http://primosoftware.com" target="_blank">(c) 2015 Primo Software Corporation. All rights reserved.</a>
    </li>
  </ul>
</div>
</body>
</html>
